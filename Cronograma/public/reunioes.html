<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Reuni천es</title>
  <link rel="stylesheet" href="styles/index.css">
  <link rel="stylesheet" href="/Cronograma/public/styles/sidebarStyle.css">
</head>
<body>

<script src="/Cronograma/public/controllers/sidebarController.js"></script>

<div class="main">
  <h1>Reuni천es</h1>

  <ul id="meetList"></ul>

  <h3>Agendar nova reuni찾o:</h3>
  <form id="meet-Form">
    <input type="text" placeholder="Assunto da reuni찾o" id="about-Meet" required><br><br>
    <input type="text" placeholder="Professor Requirido" id="teacher-Meet"><br><br>
    <input type="datetime-local" id="date-Meet" required><br><br>
    <button type="submit">Agendar</button>
  </form>
</div>

</body>

<script>
  function renderMeet() {
    const meetList = document.getElementById("meetList");
    meetList.innerHTML = "";
    const meets = JSON.parse(localStorage.getItem("ReunioesEscola") || "[]");
    meets.forEach(ev => {
      meetList.innerHTML += `<li><strong>${ev.data}:</strong> ${ev.nome} ${ev.professor ? '- ' + ev.professor : ''}</li>`;
    });
  }

  function saveMeet(e) {
    e.preventDefault();
    const aboutMeet = document.getElementById("about-Meet").value.trim();
    const teacherMeet = document.getElementById("teacher-Meet").value.trim();
    const dateMeet = document.getElementById("date-Meet").value;
    if (!aboutMeet || !dateMeet) return;

    // Formata data e hora
    const [data, hora] = dateMeet.split("T");
    const [ano, mes, dia] = data.split("-");
    const dataFormatada = `${dia}/${mes} - ${hora.slice(0,5)}`;

    const meets = JSON.parse(localStorage.getItem("ReunioesEscola") || "[]");
    meets.push({ nome: aboutMeet, professor: teacherMeet, data: dataFormatada });
    localStorage.setItem("ReunioesEscola", JSON.stringify(meets));

    renderMeet();
    document.getElementById("meet-Form").reset();
  }

  document.getElementById("meet-Form").addEventListener("submit", saveMeet);

  renderMeet();
</script>

</html>